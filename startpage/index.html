<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="starticon.png" type="image/png" />
    <title>Start Page</title>
    <link id="theme-link" rel="stylesheet" href="themes/gruvbox.css" />
    <style>
      body {
        margin: 0;
        background-color: var(--bg);
        font-family: "Segoe UI", sans-serif;
        color: var(--fg);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        text-align: center;
      }

      h1 {
        font-size: 1.5em;
        margin-bottom: 10px;
        padding: 10px;
        background-color: var(--bg);
        color: var(--fg);
        border: 2px solid var(--border);
        border-radius: 8px;
        display: inline-block;
      }

      form {
        border: 2px solid var(--border);
        padding: 10px;
        border-radius: 8px;
        display: inline-block;
        background-color: var(--bg);
      }

      h2 {
        font-size: 1.3rem;
        color: var(--fg);
        margin-bottom: 2rem;
      }

      #datetime {
        font-size: 1.2rem;
        color: var(--fg);
        padding: 8px 12px;
        margin-top: 0;
        background-color: var(--bg);
        border: 2px solid var(--border);
        border-radius: 8px;
        display: inline-block;
      }

      .search-bar input {
        padding: 0.5em 1em;
        font-size: 1rem;
        width: 300px;
        border: none;
        border-radius: 8px;
        background-color: var(--bg);
        color: var(--fg);
      }

      .search-bar input:focus {
        outline: none;
        background-color: var(--bg-alt);
      }

      .quicklines-box {
        background-color: var(--bg);
        border: 2px solid var(--border);
        border-radius: 12px;
        padding: 2rem;
        margin-top: 3rem;
        max-width: 800px;
        width: 90%;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .links {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        justify-content: center;
      }

      .category {
        text-align: left;
      }

      .category h3 {
        color: var(--fg);
        margin-bottom: 0.5em;
      }

      .category a {
        display: block;
        color: var(--fg);
        text-decoration: none;
        margin-bottom: 0.3em;
      }

      .category a:hover {
        color: var(--accent);
      }

      #matrix-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: var(--bg);
      }
    </style>
  </head>
  <body>
    <canvas id="matrix-canvas"></canvas>
    <h1>Home Page</h1>
    <h2 id="datetime"></h2>

    <div class="search-bar">
      <form
        action="https://searxng.linuxlab.work/search"
        method="get"
        target="_blank"
      >
        <input
          type="text"
          name="q"
          placeholder="Search with SearXNG..."
          required
        />
      </form>
    </div>

    <div class="quicklines-box">
      <div class="links">
        <div class="category">
          <h3>Work</h3>
          <a href="https://github.com">
            <img src="favicons/github.ico" width="16" height="16" />
            GitHub
          </a>
          <a href="https://gitlab.com">
            <img src="favicons/gitlab.ico" width="16" height="16" />
            GitLab
          </a>
          <a href="https://stackoverflow.com">
            <img src="favicons/stackoverflow.ico" width="16" height="16" />
            Stack Overflow
          </a>
          <a href="https://mail.google.com/mail/u/0/#inbox">
            <img src="favicons/gmail.ico" width="16" height="16" />
            Gmail
          </a>
          <a href="https://mail.proton.me/u/0/inbox">
            <img src="favicons/protonmail.ico" width="16" height="16" />
            ProtonMail
          </a>
          <a href="https://outlook.live.com/mail/0/">
            <img src="favicons/outlook.ico" width="16" height="16" />
            Outlook
          </a>
        </div>
        <div class="category">
          <h3>Media</h3>
          <a href="https://youtube.com">
            <img src="favicons/youtube.ico" width="16" height="16" />
            YouTube
          </a>
          <a href="https://twitch.tv">
            <img src="favicons/twitch.ico" width="16" height="16" />
            Twitch
          </a>
          <a href="https://www.reddit.com/">
            <img src="favicons/reddit.ico" width="16" height="16" />
            Reddit
          </a>
          <a href="https://discord.com/channels/@me">
            <img src="favicons/discord.ico" width="16" height="16" />
            Discord
          </a>
        </div>
        <div class="category">
          <h3>Tools</h3>
          <a href="https://chat.openai.com">
            <img src="favicons/chatgpt.ico" width="16" height="16" />
            ChatGPT
          </a>
          <a href="https://www.deepl.com/en/translator">
            <img src="favicons/deepl.ico" width="16" height="16" />
            DeepL
          </a>
          <a href="https://archive.org">
            <img src="favicons/archive.ico" width="16" height="16" />
            Internet Archive
          </a>
          <a href="https://terminal.sexy">
            <img src="favicons/hackertype.ico" width="16" height="16" />
            Terminal Sexy
          </a>
        </div>
        <div class="category">
          <h3>Projects</h3>
          <a href="https://github.com/indyleo/Catalyst">
            <img src="favicons/github.ico" width="16" height="16" />
            Catalyst
          </a>
          <a href="https://github.com/indyleo/dotfiles-stow">
            <img src="favicons/github.ico" width="16" height="16" />
            Dotfiles
          </a>
          <a href="https://github.com/indyleo/suckless">
            <img src="favicons/github.ico" width="16" height="16" />
            Suckless Tools
          </a>
          <a href="https://github.com/indyleo/scripts">
            <img src="favicons/github.ico" width="16" height="16" />
            Tool Scripts
          </a>
          <a href="https://github.com/indyleo/WindowsStuff">
            <img src="favicons/github.ico" width="16" height="16" />
            My Windows Setup
          </a>
          <a href="https://github.com/indyleo/portfilio">
            <img src="favicons/github.ico" width="16" height="16" />
            Portfolio
          </a>
        </div>
      </div>
    </div>

    <script>
      const canvas = document.getElementById("matrix-canvas");
      const ctx = canvas.getContext("2d");

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const letters =
        "アァイィウヴエェオカガキギクグケゲコゴサザシジスズセゼソゾタダチッヂヅテデトドナニヌネノハバパヒビピフブプヘベペホボポマミムメモヤユヨラリルレロワヲンABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      const fontSize = 14;
      const columns = canvas.width / fontSize;
      const drops = Array(Math.floor(columns)).fill(1);

      function drawMatrix() {
        // use CSS variable for the fading background
        ctx.fillStyle = getComputedStyle(document.documentElement)
          .getPropertyValue("--matrix-fade")
          .trim(); // trim() removes any stray spaces/newlines
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // use CSS variable for the green characters
        ctx.fillStyle = getComputedStyle(document.documentElement)
          .getPropertyValue("--matrix-green")
          .trim();
        ctx.font = `${fontSize}px monospace`;

        for (let i = 0; i < drops.length; i++) {
          const text = letters.charAt(
            Math.floor(Math.random() * letters.length),
          );
          ctx.fillText(text, i * fontSize, drops[i] * fontSize);

          if (drops[i] * fontSize > canvas.height || Math.random() > 0.975) {
            drops[i] = 0;
          }

          drops[i]++;
        }
      }

      setInterval(drawMatrix, 50);

      // Responsive canvas
      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        drops.length = Math.floor(canvas.width / fontSize);
        drops.fill(1);
      });
      function updateDateTime() {
        const now = new Date();
        const date = now.toLocaleDateString(undefined, {
          weekday: "long",
          year: "numeric",
          month: "short",
          day: "numeric",
        });
        const time = now
          .toLocaleTimeString(undefined, {
            hour: "2-digit",
            minute: "2-digit",
            hour12: true,
          })
          .toUpperCase();
        document.getElementById("datetime").textContent = `${date} | ${time}`;
      }

      async function loadTheme() {
        try {
          const response = await fetch("theme.txt");
          const themeName = (await response.text()).trim().toLowerCase();
          const themeLink = document.getElementById("theme-link");
          if (themeName === "nord") {
            themeLink.href = "themes/nord.css";
          } else {
            themeLink.href = "themes/gruvbox.css"; // default
          }
        } catch (e) {
          console.error("Could not load theme:", e);
        }
      }

      loadTheme();
      updateDateTime();
      setInterval(updateDateTime, 60000);
    </script>
  </body>
</html>
